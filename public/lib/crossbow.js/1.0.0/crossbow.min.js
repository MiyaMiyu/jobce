$.getScripts=function(e,t){var n=$.map(e,function(e){return $.getScript((t||"")+e)});return n.push($.Deferred(function(e){$(e.resolve)})),$.when.apply($,n)};let Template={},App={startup(e){"function"==typeof e&&(this._startup=e)}},Instance=function(e){this._name=e,this._helpers={},this._events={},this.data={},this._onCreated=(()=>{}),this._onRendered=(()=>{}),this._onDestroyed=(()=>{})};Instance.prototype._create=function(){console.log(`create template ${this._name}`),this._hbs.registerHelper(this._helpers),this._onCreated()},Instance.prototype.onCreated=function(e){"function"==typeof e&&(this._onCreated=e)},Instance.prototype.onRendered=function(e){"function"==typeof e&&(this._onRendered=e)},Instance.prototype.onDestroyed=function(e){"function"==typeof e&&(this._onDestroyed=e)},Instance.prototype.helpers=function(e){this._helpers=e},Instance.prototype.render=function(){return"function"==typeof this._onRendered&&this._onRendered(),this._tmpl(this.data)};let scripts=[];$('[type="template-src"]').each((e,t)=>{let{src:n}=$(t).data();void 0!==n&&scripts.push(n)}),$templates=$('[rel="import"]:not([partial])'),$templates.each((e,t)=>{let n=$(t.import).find("template"),o=n.attr("name");Template[o]=new Instance(o),Template[o]._html=n.html().replace(/{{&gt;/g,"{{>")}),console.log(`Templates Loaded in ${Date.now()-_$tsbegin} ms.`),$.getScripts(scripts).then(e=>{console.log(`Scripts Loaded in ${Date.now()-_$tsbegin} ms.`);for(name in Template){Template[name]._hbs=Handlebars.create(),Template[name]._create(),$(`[rel="import"][partial="${name}"]`).each((e,t)=>{let n=$(t.import).find("template");Template[name]._hbs.registerPartial(n.attr("name"),n.html())}),Template[name]._tmpl=Template[name]._hbs.compile(Template[name]._html)}"function"==typeof App._startup&&App._startup()},(e,t)=>{console.log(`[loadscrpits error reason]:${t}`)}),$(()=>{console.log(`DOM Loaded in ${Date.now()-_$tsbegin} ms.`)});